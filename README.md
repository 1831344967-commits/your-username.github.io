# 卡密管理使用说明

## 一、概述

根据您的需求，我们已经删除了小程序端的卡密相关功能，改为使用网页版的卡密管理系统。该系统位于工作区中的 `登录页与管理页设计` 文件夹内，用于生成随机卡密和管理卡密状态。

## 二、文件结构

### 网页版卡密管理系统
```
登录页与管理页设计/
├── src/
│   ├── components/
│   │   ├── CardModule.tsx    # 卡密管理组件
│   │   ├── Dashboard.tsx      # 管理页仪表盘
│   │   └── Login.tsx          # 登录页
│   ├── styles/
│   ├── App.tsx
│   └── main.tsx
├── index.html
├── package.json
└── vite.config.ts
```

## 三、使用方法

### 1. 运行网页版卡密管理系统

1. 进入 `登录页与管理页设计` 文件夹
2. 安装依赖：`npm install`
3. 启动开发服务器：`npm run dev`
4. 在浏览器中访问提示的地址（通常是 `http://localhost:5173`）

### 2. 卡密管理功能

#### 生成卡密
1. 登录管理后台
2. 进入卡密管理模块
3. 点击"生成卡密"按钮展开生成面板
4. 选择卡密类型（月卡/季卡/年卡）
5. 输入生成数量
6. 点击"生成"按钮生成卡密
7. 点击"复制"按钮复制生成的卡密

#### 查询卡密
1. 在搜索框中输入卡密编号
2. 选择状态筛选条件（全部/未使用/已使用/已过期）
3. 点击"查询"按钮查看结果
4. 点击"重置"按钮清空筛选条件

#### 卡密状态说明
- **未使用**：卡密已生成但尚未被激活
- **已使用**：卡密已被成功激活
- **已过期**：卡密已超过有效期

## 四、与小程序对接方案

### 1. 数据存储对接

网页版卡密管理系统需要与小程序使用相同的云数据库，确保卡密数据能够在两端共享。

**建议的数据结构：**
```javascript
{
  code: string,        // 卡密字符串
  type: string,         // 卡密类型（月卡/季卡/年卡）
  status: number,       // 状态（0：未使用，1：已使用，2：已过期）
  createTime: Date,     // 创建时间
  expireTime: Date,     // 过期时间
  activateTime: Date,   // 激活时间（可选）
  openid: string        // 激活用户的openid（可选）
}
```

### 2. API 对接

需要开发以下 API 接口，供小程序调用：

#### (1) 卡密激活 API
- **接口地址**：`/api/card/activate`
- **请求方法**：POST
- **请求参数**：`{ code: string, openid: string }`
- **返回结果**：激活状态和会员有效期

#### (2) 卡密状态查询 API
- **接口地址**：`/api/card/status`
- **请求方法**：GET
- **请求参数**：`{ code: string }`
- **返回结果**：卡密状态信息

### 3. 小程序端集成

在小程序的会员权益页面，可以添加卡密激活入口，调用上述 API 进行卡密激活。

## 五、注意事项

1. 确保网页版管理系统和小程序使用相同的云环境
2. 定期备份卡密数据，防止数据丢失
3. 卡密生成后，建议通过安全渠道分发给用户
4. 定期清理过期卡密，优化数据库性能
5. 为管理后台设置强密码，确保系统安全

## 六、后续开发建议

1. 为卡密添加有效期设置功能
2. 增加卡密导出功能，支持批量导出为 Excel
3. 添加用户激活记录查询
4. 实现卡密使用统计功能
5. 为管理后台添加权限控制

## 七、技术支持

如有任何问题或需要进一步的开发支持，请随时联系技术团队。
